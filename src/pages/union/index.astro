---
import DefaultLayout from "@layouts/default.astro";
import { Astros } from "@helpers";
import { getBordersLink } from "@comptime";

const BASE = (import.meta.env.BASE_URL ?? "/");

// State information extracted from borders.json.ts
const states = [
    {
        name: "Icenia Federal Territory",
        type: "Federal Territory",
        description: "The heartlands of Icenia, encompassing a large portion of the -,- quadrant. Stretches from lush forests and snowy mountains to sprawling plains and deserts.",
        color: "#3AB3DA",
        coordinates: "-4554 -4938",
        notes: "Icenia's original territory established on 15th May 2022"
    },
    {
        name: "Icenia City",
        type: "Capital Territory",
        description: "The administrative and economic center of the Republic, hosting key government buildings, bustling markets, and the historic core of Icenian society.",
        color: "#3AB3DA",
        coordinates: "-3920, -4274",
        notes: "Formed from federal territory on 19th November 2025"
    },
    {
        name: "Icarus",
        type: "State",
        description: "Desert and savanna biomes characterize this western frontier. Home to the legendary 'Ikea' vault and gateway to the western territories.",
        color: "#B22234",
        coordinates: "-5790 232",
        notes: "Became a State of Icenia on 28th August 2024 via the Icarus-Icenia Merger"
    },
    {
        name: "Cortesia Del Mar",
        type: "State",
        description: "Comparatively recently returned sovereign nation that joined the Union. Coastal territory known for its maritime heritage and strategic southern position.",
        color: "#2F9AFF",
        coordinates: "2449 4460",
        notes: "Became a State of Icenia on 23rd September 2024"
    },
    {
        name: "Southshire",
        type: "State",
        description: "Historical territory with deep roots in Icenian culture. Home to Castle Batavia and the Batavian Plains. Once an allied and friendly nation to Icenia, later became a state.",
        color: "#013201",
        coordinates: "-7042 -4982",
        notes: "Became a State of Icenia on 30th April 2023"
    },
    {
        name: "Riemark",
        type: "State",
        description: "Originally a small village, later achieved statehood through the Mandate of Selsey.",
        color: "#55FFFF",
        coordinates: "-2619 -4993",
        notes: "Became a State of Icenia on 9th July 2024 via the Mandate of Selsey"
    },
];
---

<DefaultLayout 
    title="The Republic - States and Territories of Icenia"
    description="Explore the diverse states and territories that make up the Third Republic of Icenia."
>
    
    <div class="govuk-width-container">
        <main class="govuk-main-wrapper">

            <!-- Intro Box -->
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-full">
                    <div class="icenia-card" style="margin-bottom: 30px; background-color: var(--icenia-blue); color: white;">
                        <h3 class="govuk-heading-m" style="color: white; display: flex; align-items: center; gap: 10px;">
                            <span>üèõÔ∏è</span> The Republic
                        </h3>
                        <p class="govuk-body-l" style="color: white; margin-bottom: 10px;">
                            Explore the diverse states and territories that make up the Third Republic of Icenia.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Interactive Map -->
            <div class="icenia-card" style="margin-bottom: 30px;">
                <h3 class="govuk-heading-m" style="color: var(--icenia-blue); margin-top: 0;">Interactive Map</h3>
                <p class="govuk-body">
                    View our territories on the official CivMC map. Our borders are maintained and updated through 
                    <code>borders.json.ts</code> for accurate representation.
                </p>
                <a href={Astros.isDevMode() ? BASE + "government/map" : getBordersLink(Astro)} target="_blank" class="icenia-btn">View Map</a>
                <a href={BASE + "government/borders.json"} class="icenia-btn icenia-btn-secondary">Download Borders JSON</a>
            </div>

            <h3 class="govuk-heading-l" style="color: var(--icenia-blue);">States and Territories</h3>
                
                <div style="display: grid; gap: 20px;">
                    {states.map((state) => (
                        <div class="state-card" style={`border-left-color: ${state.color}`}>
                            <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 10px;">
                                <div>
                                    <h4 style="margin: 0 0 5px 0; font-size: 1.5rem;">{state.name}</h4>
                                    <p style="margin: 0; color: #666; font-style: italic;">{state.type}</p>
                                </div>
                                <div style={`background-color: ${state.color}; width: 40px; height: 40px; border-radius: 4px;`}></div>
                            </div>
                            
                            <p style="margin: 15px 0;">{state.description}</p>
                            
                            <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee;">
                                <div>
                                    <strong style="color: var(--icenia-blue);">Coordinates:</strong>
                                    <span style="margin-left: 5px;">{state.coordinates}</span>
                                </div>
                            </div>
                            
                            {state.notes && (
                                <p style="margin: 15px 0 0 0; padding: 10px; background-color: #f8f8f8; border-radius: 4px; font-size: 0.9rem;">
                                    <strong>Note:</strong> {state.notes}
                                </p>
                            )}
                        </div>
                    ))}
                </div>

                <div style="margin-top: 30px; text-align: center;">
                    <a href={BASE} class="icenia-btn">‚Üê Back to Home</a>
                    <a href={BASE + "government/officials/"} class="icenia-btn icenia-btn-secondary">View Officials</a>
                </div>
            </div>

    <style>
        body {
            font-family: inherit;
            background-color: var(--off-white);
            color: var(--icenia-black);
        }
    </style>
</DefaultLayout>
