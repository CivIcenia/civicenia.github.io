---
import { type MarkdownLayoutProps } from "astro";
import { Arrays } from "@helpers";
import { CouncilElections } from "@collections";

import PostLayout from "@layouts/news/post.astro";

type Props = MarkdownLayoutProps<CouncilElections.CouncilElection>;
const { frontmatter } = Astro.props as Props;
const election = CouncilElections.ensureCouncilElection(frontmatter);
const BASE = (import.meta.env.BASE_URL ?? "/");
---
<style>
    div.header {
        text-align: center;
    }

    div.council-members-wrapper {
        width: 100%;
        display: grid;
        grid-gap: 1rem;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        margin: 20px 0;
    }

    div.council-member {
        background: #1d70b8;
        color: white;
        padding: 15px;
        text-align: center;
        border-radius: 4px;
    }

    div.council-member-name {
        font-weight: 700;
        font-size: 1.125rem;
    }

    div.council-member-role {
        font-size: 0.875rem;
        opacity: 0.9;
        margin-top: 5px;
    }
</style>

<PostLayout chin={false}>
    <div class="header">
        <p class="govuk-body-s" style="margin-bottom: 5px;">Icenia City Council</p>
        <h1 class="govuk-heading-l">{election.headline}</h1>
        <p class="govuk-body">Term {election.term}</p>
    </div>

    {election.councillors && election.councillors.length > 0 && (
        <div class="council-members-wrapper">
            {election.councillors.map((councillor) => (
                <div class="council-member">
                    <div class="council-member-name">{councillor.name}</div>
                    {councillor.role && <div class="council-member-role">{councillor.role}</div>}
                </div>
            ))}
        </div>
    )}

    <br/><hr/>

    <slot/>

    <div class="govuk-inset-text" style="margin-top: 20px;">
        <p class="govuk-body-s">
            <a href={BASE + "icenia-city/"} class="govuk-link">&larr; Back to Icenia City</a>
        </p>
    </div>
</PostLayout>
